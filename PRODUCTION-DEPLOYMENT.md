# Production Deployment Guide for Ardent POS

## Quick Deployment to Digital Ocean

### Step 1: GitHub Repository Setup
Your code is ready to be pushed to: `https://github.com/mdYoungDOer/ardent-pos`

```bash
# Navigate to project directory
cd "Ardent POS"

# Initialize git (if not already done)
git init
git add .
git commit -m "Initial commit: Complete Ardent POS system"

# Add remote and push
git remote add origin https://github.com/mdYoungDOer/ardent-pos.git
git branch -M main
git push -u origin main
```

### Step 2: Digital Ocean App Platform Deployment

#### Option A: One-Click Deploy (Recommended)
1. Go to [Digital Ocean App Platform](https://cloud.digitalocean.com/apps)
2. Click **Create App**
3. Choose **GitHub** and select `mdYoungDOer/ardent-pos`
4. The app will auto-detect the configuration from `.do/app.yaml`

#### Option B: Manual Configuration
If auto-detection doesn't work, configure manually:

**Backend Service:**
- Source Directory: `/backend`
- Build Command: `composer install --no-dev --optimize-autoloader`
- Run Command: `vendor/bin/heroku-php-apache2`
- Environment: PHP
- Route: `/api`

**Frontend Service:**
- Source Directory: `/frontend`
- Build Command: `npm ci && npm run build`
- Output Directory: `build`
- Environment: Node.js
- Route: `/`

### Step 3: Database Setup

#### Create PostgreSQL Database
1. In Digital Ocean Dashboard, go to **Databases**
2. Create new PostgreSQL 14 cluster
3. Name: `ardent-pos-db`
4. Plan: Basic ($15/month) or Professional ($60/month)
5. Region: Same as your app

#### Initialize Database Schema
```bash
# Connect to database using provided connection string
psql "postgresql://username:password@host:port/database?sslmode=require"

# Run schema
\i db/schema.sql

# Create initial admin user
INSERT INTO users (name, email, password, role, created_at) 
VALUES (
    'Admin User', 
    'admin@yourdomain.com', 
    '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 
    'Admin', 
    NOW()
);
```

### Step 4: Environment Variables Configuration

Set these in Digital Ocean App Platform:

#### Backend Environment Variables
```env
# Database (Get from your Digital Ocean database)
DB_HOST=your-db-host
DB_PORT=25060
DB_NAME=ardent_pos
DB_USER=doadmin
DB_PASS=your-db-password

# Security
JWT_SECRET=your-super-secure-jwt-secret-minimum-32-characters-long

# App URLs (Auto-generated by Digital Ocean)
APP_URL=${APP_URL}
CORS_ORIGIN=${APP_URL}

# Payment Integration (Optional - Get from Paystack)
PAYSTACK_PUBLIC_KEY=pk_live_your_public_key
PAYSTACK_SECRET_KEY=sk_live_your_secret_key

# Email Integration (Optional - Get from SendGrid)
SENDGRID_API_KEY=SG.your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
```

#### Frontend Environment Variables
```env
# API URL (Auto-generated)
REACT_APP_API_URL=${backend.PUBLIC_URL}

# Payment Integration
REACT_APP_PAYSTACK_PUBLIC_KEY=pk_live_your_public_key
```

### Step 5: Post-Deployment Setup

#### Test the Application
1. Wait for deployment to complete (5-10 minutes)
2. Visit your app URL
3. Login with: `admin@yourdomain.com` / `password`
4. Change the default password immediately

#### Configure Custom Domain (Optional)
1. In App Platform, go to Settings â†’ Domains
2. Add your custom domain
3. Update DNS records as instructed
4. Update environment variables with new domain

### Step 6: Production Optimizations

#### Security Checklist
- [ ] Change default admin password
- [ ] Use strong JWT secret (32+ characters)
- [ ] Enable HTTPS (automatic with Digital Ocean)
- [ ] Configure proper CORS origins
- [ ] Set up database backups
- [ ] Enable monitoring and alerts

#### Performance Optimizations
- [ ] Enable database connection pooling
- [ ] Set up CDN for static assets
- [ ] Configure caching headers
- [ ] Monitor resource usage
- [ ] Set up auto-scaling if needed

### Cost Breakdown

#### Minimum Production Setup
- **App Platform**: $12/month (Professional)
- **Database**: $15/month (Basic)
- **Total**: ~$27/month

#### Recommended Production Setup
- **App Platform**: $12/month (Professional)
- **Database**: $60/month (Professional)
- **Total**: ~$72/month

### Monitoring and Maintenance

#### Regular Tasks
1. **Daily**: Monitor app performance and errors
2. **Weekly**: Check database performance metrics
3. **Monthly**: Review and optimize resource usage
4. **Quarterly**: Update dependencies and security patches

#### Key Metrics to Monitor
- Response time and uptime
- Database connection count
- Memory and CPU usage
- Error rates and logs
- User activity and growth

### Troubleshooting

#### Common Issues

**Build Failures:**
```bash
# Check build logs in Digital Ocean
# Verify composer.json and package.json
# Ensure all dependencies are specified
```

**Database Connection Issues:**
```bash
# Verify connection string format
# Check firewall and network settings
# Ensure database is in same region
```

**CORS Errors:**
```bash
# Verify CORS_ORIGIN environment variable
# Check frontend API URL configuration
# Ensure backend CORS headers are set
```

### Backup and Recovery

#### Automated Backups
- Digital Ocean automatically backs up databases
- App code is version-controlled in GitHub
- Environment variables should be documented securely

#### Manual Backup
```bash
# Database backup
pg_dump "postgresql://user:pass@host:port/db" > backup.sql

# Restore database
psql "postgresql://user:pass@host:port/db" < backup.sql
```

### Support Resources

- **Digital Ocean Documentation**: [App Platform Docs](https://docs.digitalocean.com/products/app-platform/)
- **GitHub Repository**: https://github.com/mdYoungDOer/ardent-pos
- **Issue Tracking**: Use GitHub Issues for bug reports
- **Community Support**: Digital Ocean Community Forums

---

## Quick Commands Reference

```bash
# Deploy updates
git add .
git commit -m "Update: description of changes"
git push origin main

# View logs
doctl apps logs <app-id> --type=run

# Scale application
doctl apps update <app-id> --spec=.do/app.yaml

# Database connection
psql $(doctl databases connection-string <db-id>)
```

Your Ardent POS system is now ready for production deployment! ðŸš€
